[gd_scene load_steps=21 format=2]

[ext_resource path="res://addons/zylann.hterrain/hterrain.gd" type="Script" id=1]
[ext_resource path="res://addons/zylann.hterrain/hterrain_texture_set.gd" type="Script" id=2]
[ext_resource path="res://volcano_terrain/data.hterrain" type="Resource" id=3]
[ext_resource path="res://crane.tscn" type="PackedScene" id=4]
[ext_resource path="res://rock2.obj" type="ArrayMesh" id=5]
[ext_resource path="res://rock3.obj" type="ArrayMesh" id=6]
[ext_resource path="res://rock1.obj" type="ArrayMesh" id=7]
[ext_resource path="res://ui.tscn" type="PackedScene" id=8]
[ext_resource path="res://structure1.tscn" type="PackedScene" id=9]
[ext_resource path="res://volcano_level.gd" type="Script" id=10]
[ext_resource path="res://triangle_roof.obj" type="ArrayMesh" id=11]
[ext_resource path="res://triangle_pit.obj" type="ArrayMesh" id=12]

[sub_resource type="Resource" id=9]
script = ExtResource( 2 )
mode = 0
textures = [ [  ], [  ] ]

[sub_resource type="ProceduralSky" id=10]
sky_top_color = Color( 0.176471, 0.027451, 0, 1 )
sky_horizon_color = Color( 0.803922, 0.133333, 0, 1 )
ground_bottom_color = Color( 0.12549, 0.101961, 0.0588235, 1 )
ground_horizon_color = Color( 0.572549, 0.133333, 0, 1 )

[sub_resource type="Environment" id=11]
background_mode = 1
background_sky = SubResource( 10 )
background_color = Color( 0.443137, 0.0627451, 0, 1 )
background_energy = 0.86
ambient_light_color = Color( 1, 0.235294, 0, 1 )
ambient_light_energy = 0.17
fog_enabled = true
fog_color = Color( 0.443137, 0.0627451, 0, 1 )
fog_depth_begin = 58.8
fog_depth_end = 111.1
fog_depth_curve = 6.49802

[sub_resource type="QuadMesh" id=12]

[sub_resource type="SpatialMaterial" id=13]

[sub_resource type="BoxShape" id=14]
extents = Vector3( 0.387455, 2.0117, 2.80906 )

[sub_resource type="ConcavePolygonShape" id=15]
data = PoolVector3Array( 1.5148, 2.2645, 0.8745, 1.5148, -0.0181, 0.8745, -1.5148, 2.2645, 0.8745, -1.5148, 2.2645, 0.8745, 1.5148, -0.0181, 0.8745, -1.5148, -0.0181, 0.8745, 1.5148, -0.0181, 0.8745, 0, -0.0181, -1.7491, -1.5148, -0.0181, 0.8745, -1.5148, 2.2645, 0.8745, -1.5148, -0.0181, 0.8745, 0, 2.2645, -1.7491, 0, 2.2645, -1.7491, -1.5148, -0.0181, 0.8745, 0, -0.0181, -1.7491, 0, 2.2645, -1.2369, 0, 2.2645, -1.2369, 1.0712, 2.2645, 0.6185, 1.0712, 2.2645, 0.6185, 0, 2.2645, -1.2369, 1.0712, 2.2645, 0.6185, 0, 2.2645, -1.7491, 0, -0.0181, -1.7491, 1.5148, 2.2645, 0.8745, 1.5148, 2.2645, 0.8745, 0, -0.0181, -1.7491, 1.5148, -0.0181, 0.8745, 0, 2.2645, -1.7491, 0, 2.2645, -1.2369, -1.5148, 2.2645, 0.8745, -1.5148, 2.2645, 0.8745, 0, 2.2645, -1.2369, -1.0712, 2.2645, 0.6185, -1.5148, 2.2645, 0.8745, -1.0712, 2.2645, 0.6185, 1.5148, 2.2645, 0.8745, 1.5148, 2.2645, 0.8745, -1.0712, 2.2645, 0.6185, 1.0712, 2.2645, 0.6185, 1.5148, 2.2645, 0.8745, 1.0712, 2.2645, 0.6185, 0, 2.2645, -1.7491, 0, 2.2645, -1.7491, 1.0712, 2.2645, 0.6185, 0, 2.2645, -1.2369, 0, 0.2656, -1.2369, 0, 2.2645, -1.2369, 1.0712, 0.2656, 0.6185, 1.0712, 0.2656, 0.6185, 0, 2.2645, -1.2369, 1.0712, 2.2645, 0.6185, 1.0712, 2.2645, 0.6185, 1.0712, 2.2645, 0.6185, -1.0712, 2.2645, 0.6185, -1.0712, 2.2645, 0.6185, 1.0712, 2.2645, 0.6185, -1.0712, 2.2645, 0.6185, -1.0712, 2.2645, 0.6185, -1.0712, 2.2645, 0.6185, 0, 2.2645, -1.2369, 0, 2.2645, -1.2369, -1.0712, 2.2645, 0.6185, 0, 2.2645, -1.2369, -1.0712, 0.2656, 0.6185, 0, 0.2656, -1.2369, 1.0712, 0.2656, 0.6185, 1.0712, 0.2656, 0.6185, 1.0712, 2.2645, 0.6185, -1.0712, 0.2656, 0.6185, -1.0712, 0.2656, 0.6185, 1.0712, 2.2645, 0.6185, -1.0712, 2.2645, 0.6185, -1.0712, 0.2656, 0.6185, -1.0712, 2.2645, 0.6185, 0, 0.2656, -1.2369, 0, 0.2656, -1.2369, -1.0712, 2.2645, 0.6185, 0, 2.2645, -1.2369 )

[sub_resource type="CylinderShape" id=8]
radius = 2.94486
height = 0.458601

[node name="volcano_level" type="Spatial"]
script = ExtResource( 10 )

[node name="HTerrain" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -125, 0, -125 )
script = ExtResource( 1 )
_terrain_data = ExtResource( 3 )
chunk_size = 32
collision_enabled = true
collision_layer = 1
collision_mask = 1
shader_type = "Classic4Lite"
custom_shader = null
custom_globalmap_shader = null
texture_set = SubResource( 9 )
shader_params/u_ground_uv_scale = 20
shader_params/u_depth_blending = true
shader_params/u_triplanar = false
shader_params/u_tile_reduction = Plane( 0, 0, 0, 0 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 11 )

[node name="lava" type="MeshInstance" parent="."]
transform = Transform( 229.94, 0, 0, 0, 1.31134e-07, 1, 0, -229.94, 3.01529e-05, 1.28931, -8.48882, -0.0272865 )
mesh = SubResource( 12 )
material/0 = SubResource( 13 )

[node name="OmniLight" type="OmniLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 51.1448, 9.28505, -13.6551 )
light_color = Color( 1, 0.470588, 0, 1 )
light_energy = 2.06
shadow_reverse_cull_face = true
omni_range = 195.7

[node name="OmniLight2" type="OmniLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -59.7642, 7.74052, 28.6223 )
light_color = Color( 1, 0.470588, 0, 1 )
light_energy = 1.54
shadow_reverse_cull_face = true
omni_range = 1070.3

[node name="rock1" type="MeshInstance" parent="."]
transform = Transform( 3.49553, 0, 5.5506, 0, 6.55956, 0, -5.5506, 0, 3.49553, 99.4157, -11.9352, 15.3407 )
mesh = ExtResource( 7 )
material/0 = null

[node name="rock2" type="MeshInstance" parent="."]
transform = Transform( 10.0288, 0, 0, 0, 10.0288, 0, 0, 0, 10.0288, 53.4866, 0.558083, 57.446 )
mesh = ExtResource( 5 )
material/0 = null

[node name="rock3" type="MeshInstance" parent="."]
transform = Transform( 11.0992, 0, 0, 0, 11.0992, 0, 0, 0, 11.0992, 25.7841, -7.05355, -63.6566 )
mesh = ExtResource( 6 )
material/0 = null

[node name="rock4" type="MeshInstance" parent="."]
transform = Transform( -1.99357, -0.753646, -3.16561, 0.401611, -3.74104, 0.637723, -3.2292, 0, 2.03362, -6.67691, 5.04232, 60.1751 )
mesh = ExtResource( 7 )
material/0 = null

[node name="rock5" type="MeshInstance" parent="."]
transform = Transform( -3.28007, -3.81747, 6.14222, 6.02302, -5.17513, 0, 4.00289, 4.65872, 5.03308, -9.45036, 0.558083, -48.4578 )
mesh = ExtResource( 5 )
material/0 = null

[node name="rock6" type="MeshInstance" parent="."]
transform = Transform( -5.06689, 0, 9.8752, 0, 11.0992, 0, -9.8752, 0, -5.06689, -52.3121, -7.05355, -40.91 )
mesh = ExtResource( 6 )
material/0 = null

[node name="ui" parent="." instance=ExtResource( 8 )]

[node name="target1" type="Spatial" parent="."]
transform = Transform( 0.528082, 0, 0.849192, 0, 1, 0, -0.849192, 0, 0.528082, -11.8534, 3.16608, 10.3344 )

[node name="wall" parent="target1" groups=[
"walls",
] instance=ExtResource( 9 )]
transform = Transform( 0.615875, 0, 1.06673, 0, 1.23175, 0, -1.06673, 0, 0.615875, -0.541769, 0.234955, -1.64131 )

[node name="wall2" parent="target1" groups=[
"walls",
] instance=ExtResource( 9 )]
transform = Transform( 0.615875, 0, -1.06673, 0, 1.23175, 0, 1.06673, 0, 0.615875, 2.20028, 0.244, 2.2568 )

[node name="wall3" parent="target1" groups=[
"walls",
] instance=ExtResource( 9 )]
transform = Transform( -1.23175, 0, -4.01357e-07, 0, 1.23175, 0, 4.01357e-07, 0, -1.23175, -2.546, 0.244, 2.652 )

[node name="area1" type="Area" parent="target1" groups=[
"areas",
]]
transform = Transform( 0.866025, 0, -0.5, 0, 1, 0, 0.5, 0, 0.866025, -1.82558, 2.02755, 0.672934 )

[node name="CollisionShape" type="CollisionShape" parent="target1/area1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0585017, 0, -0.375308 )
shape = SubResource( 14 )

[node name="area2" type="Area" parent="target1" groups=[
"areas",
]]
transform = Transform( 0.866025, 0, 0.5, 0, 1, 0, -0.5, 0, 0.866025, 1.32144, 2.028, 0.57363 )

[node name="CollisionShape" type="CollisionShape" parent="target1/area2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0585017, 0, -0.375308 )
shape = SubResource( 14 )

[node name="area3" type="Area" parent="target1" groups=[
"areas",
]]
transform = Transform( -1.62921e-07, 0, 1, 0, 1, 0, -1, 0, -1.62921e-07, 0.077, 2.028, 2.529 )

[node name="CollisionShape" type="CollisionShape" parent="target1/area3"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0585017, 0, -0.375308 )
shape = SubResource( 14 )

[node name="platform" type="StaticBody" parent="target1"]
transform = Transform( 1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, -0.304379, -4.63326, 1.07686 )

[node name="triangle_pit" type="MeshInstance" parent="target1/platform"]
transform = Transform( 2.08012, 0, 0, 0, 2.08012, 0, 0, 0, 2.08012, 0, 0, 0 )
mesh = ExtResource( 12 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="target1/platform"]
transform = Transform( 2.08012, 0, 0, 0, 2.08012, 0, 0, 0, 2.08012, 0, 0, 0 )
shape = SubResource( 15 )

[node name="roof" type="RigidBody" parent="target1"]
transform = Transform( 1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, -0.216665, 4.13013, 1.12701 )

[node name="MeshInstance" type="MeshInstance" parent="target1/roof"]
transform = Transform( 2.26116, 0, 6.73877e-08, 0, 2.26116, 0, -6.73877e-08, 0, 2.26116, 0, 0, 0 )
mesh = ExtResource( 11 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="target1/roof"]
shape = SubResource( 8 )

[node name="target2" type="Spatial" parent="."]
transform = Transform( 0.551747, 0, 0.834011, 0, 1, 0, -0.834011, 0, 0.551747, 0.440007, 3.2107, -4.88424 )

[node name="wall" parent="target2" groups=[
"walls",
] instance=ExtResource( 9 )]
transform = Transform( 0.615875, 0, 1.06673, 0, 1.23175, 0, -1.06673, 0, 0.615875, -0.541769, 0.234955, -1.64131 )

[node name="wall2" parent="target2" groups=[
"walls",
] instance=ExtResource( 9 )]
transform = Transform( 0.615875, 0, -1.06673, 0, 1.23175, 0, 1.06673, 0, 0.615875, 2.20028, 0.244, 2.2568 )

[node name="wall3" parent="target2" groups=[
"walls",
] instance=ExtResource( 9 )]
transform = Transform( -1.23175, 0, -4.01357e-07, 0, 1.23175, 0, 4.01357e-07, 0, -1.23175, -2.546, 0.244, 2.652 )

[node name="area1" type="Area" parent="target2" groups=[
"areas",
]]
transform = Transform( 0.866025, 0, -0.5, 0, 1, 0, 0.5, 0, 0.866025, -1.82558, 2.02755, 0.672934 )

[node name="CollisionShape" type="CollisionShape" parent="target2/area1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0585017, 0, -0.375308 )
shape = SubResource( 14 )

[node name="area2" type="Area" parent="target2" groups=[
"areas",
]]
transform = Transform( 0.866025, 0, 0.5, 0, 1, 0, -0.5, 0, 0.866025, 1.32144, 2.028, 0.57363 )

[node name="CollisionShape" type="CollisionShape" parent="target2/area2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0585017, 0, -0.375308 )
shape = SubResource( 14 )

[node name="area3" type="Area" parent="target2" groups=[
"areas",
]]
transform = Transform( -1.62921e-07, 0, 1, 0, 1, 0, -1, 0, -1.62921e-07, 0.077, 2.028, 2.529 )

[node name="CollisionShape" type="CollisionShape" parent="target2/area3"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0585017, 0, -0.375308 )
shape = SubResource( 14 )

[node name="platform" type="StaticBody" parent="target2"]
transform = Transform( 1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, -0.304379, -4.63326, 1.07686 )

[node name="triangle_pit" type="MeshInstance" parent="target2/platform"]
transform = Transform( 2.08012, 0, 0, 0, 2.08012, 0, 0, 0, 2.08012, 0, 0, 0 )
mesh = ExtResource( 12 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="target2/platform"]
transform = Transform( 2.08012, 0, 0, 0, 2.08012, 0, 0, 0, 2.08012, 0, 0, 0 )
shape = SubResource( 15 )

[node name="roof" type="RigidBody" parent="target2"]
transform = Transform( 1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, -0.216665, 4.13013, 1.12701 )

[node name="MeshInstance" type="MeshInstance" parent="target2/roof"]
transform = Transform( 2.26116, 0, 6.73877e-08, 0, 2.26116, 0, -6.73877e-08, 0, 2.26116, 0, 0, 0 )
mesh = ExtResource( 11 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="target2/roof"]
shape = SubResource( 8 )

[node name="crane" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10.2358, -0.00839424, -4.01427 )
